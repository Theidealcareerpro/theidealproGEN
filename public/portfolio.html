<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Enhanced SEO Meta Tags -->
    <meta name="description" content="Create a professional portfolio with our AI-powered portfolio generator. Customizable templates, GitHub Pages hosting, and ATS-friendly formats.">
    <meta name="keywords" content="portfolio generator, GitHub portfolio, professional portfolio, web portfolio, portfolio creator, ATS-friendly">
    <meta name="author" content="Document Generation System">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Professional Portfolio Generator | Document System">
    <meta property="og:description" content="Create stunning portfolios with our AI-powered system. Hosted on GitHub Pages with professional templates.">
    <meta property="og:image" content="/images/og-portfolio.jpg">
    <meta property="og:url" content="https://your-document-system.netlify.app/portfolio">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Professional Portfolio Generator">
    <meta name="twitter:description" content="Create stunning portfolios with our AI-powered system">
    
    <title>Create Professional Portfolio | Document Generation System</title>
    
    <!-- Preload Critical Resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@monaco-editor/loader@1.3.3/min/monaco.min.css" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        'brand': {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                    }
                }
            }
        }
    </script>
    
    <!-- Critical CSS -->
    <style>
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .monaco-editor {
            min-height: 300px;
        }
        [x-cloak] { display: none !important; }
    </style>
</head>

<body class="bg-gray-50 min-h-screen flex flex-col font-sans antialiased">
    <!-- Skip to main content -->
    <a href="#main" 
       class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-brand-600 text-white px-4 py-2 rounded-md z-50">
        Skip to main content
    </a>

    <!-- Header -->
    <header class="bg-gradient-to-r from-brand-700 to-brand-600 text-white shadow-lg sticky top-0 z-40">
        <nav class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <a href="/" class="flex items-center space-x-3">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                              d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">
                        </path>
                    </svg>
                    <span class="text-xl font-bold">Document Generator</span>
                </a>

                <!-- Desktop Navigation -->
                <ul class="hidden md:flex space-x-6" role="navigation">
                    <li>
                        <a href="/" 
                           class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-white/10 transition-colors"
                           aria-label="Go to home page">
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="/cv.html"
                           class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-white/10 transition-colors"
                           aria-label="Create a CV">
                            Create CV
                        </a>
                    </li>
                    <li>
                        <a href="/cover-letter.html"
                           class="nav-link px-3 py-2 rounded-md text-sm font-medium hover:bg-white/10 transition-colors"
                           aria-label="Create a cover letter">
                            Cover Letter
                        </a>
                    </li>
                    <li>
                        <a href="/portfolio.html"
                           class="nav-link px-3 py-2 rounded-md text-sm font-medium bg-white/20"
                           aria-current="page"
                           aria-label="Create a portfolio">
                            Portfolio
                        </a>
                    </li>
                </ul>

                <!-- Mobile Menu Button -->
                <button type="button"
                        class="md:hidden p-2 rounded-md hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white"
                        aria-controls="mobile-menu"
                        aria-expanded="false"
                        @click="mobileMenuOpen = !mobileMenuOpen">
                    <span class="sr-only">Open main menu</span>
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>

            <!-- Mobile Navigation -->
            <div class="md:hidden" id="mobile-menu" x-show="mobileMenuOpen" x-cloak>
                <div class="px-2 pt-2 pb-3 space-y-1">
                    <a href="/" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-white/10">Home</a>
                    <a href="/cv.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-white/10">Create CV</a>
                    <a href="/cover-letter.html" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-white/10">Cover Letter</a>
                    <a href="/portfolio.html" class="block px-3 py-2 rounded-md text-base font-medium bg-white/20" aria-current="page">Portfolio</a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main id="main" class="container mx-auto px-4 py-8 flex-grow" x-data="portfolioEditor()">
        <!-- Would you like me to continue with the main content section? -->
<!-- Main Content Section -->
<div class="max-w-7xl mx-auto">
    <!-- Page Header -->
    <div class="text-center mb-10 animate-fade-in">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">Create Your Professional Portfolio</h1>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
            Build a stunning portfolio hosted on GitHub Pages. Choose from professional templates and customize your content.
        </p>
    </div>

    <!-- Main Editor Section -->
    <div class="flex flex-col lg:flex-row gap-8 animate-slide-up">
        <!-- Left Column - Editor -->
        <div class="w-full lg:w-1/2 space-y-6">
            <!-- Template Selection -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Choose Template</h2>
                <div class="grid grid-cols-2 gap-4">
                    <template x-for="template in templates" :key="template.id">
                        <button 
                            class="relative aspect-video rounded-lg border-2 transition-all duration-200 overflow-hidden"
                            :class="selectedTemplate === template.id ? 'border-brand-500 ring-2 ring-brand-500/20' : 'border-gray-200 hover:border-brand-500/50'"
                            @click="selectTemplate(template.id)">
                            <img :src="template.thumbnail" :alt="template.name" class="w-full h-full object-cover">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-3">
                                <span class="text-white text-sm font-medium" x-text="template.name"></span>
                            </div>
                        </button>
                    </template>
                </div>
                <div class="mt-2">
                    <p class="text-sm text-red-500" x-show="errors.template" x-text="errors.template"></p>
                </div>
            </div>

            <!-- Portfolio Content Editor -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Portfolio Content</h2>
                
                <!-- Basic Information -->
                <div class="space-y-4 mb-6">
                    <div>
                        <label for="portfolioTitle" class="block text-sm font-medium text-gray-700 mb-1">Portfolio Title</label>
                        <input 
                            type="text" 
                            id="portfolioTitle" 
                            x-model="formData.title"
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500"
                            placeholder="e.g., John Doe - Web Developer"
                            @input="validateField('title')">
                        <p class="text-sm text-red-500 mt-1" x-show="errors.title" x-text="errors.title"></p>
                    </div>

                    <div>
                        <label for="githubUsername" class="block text-sm font-medium text-gray-700 mb-1">GitHub Username</label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 21.795 24 17.295 24 12c0-6.63-5.37-12-12-12"></path>
                                </svg>
                            </span>
                            <input 
                                type="text" 
                                id="githubUsername" 
                                x-model="formData.github"
                                class="w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500"
                                placeholder="your-github-username"
                                @input="validateField('github')">
                        </div>
                        <p class="text-sm text-red-500 mt-1" x-show="errors.github" x-text="errors.github"></p>
                    </div>
                </div>

                <!-- Projects Section -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Projects</label>
                    <template x-for="(project, index) in formData.projects" :key="index">
                        <div class="flex gap-2 mb-2">
                            <input 
                                type="text" 
                                x-model="formData.projects[index]"
                                class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500"
                                placeholder="Project description">
                            <button 
                                @click="removeProject(index)"
                                class="p-2 text-red-500 hover:bg-red-50 rounded-lg"
                                aria-label="Remove project">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </template>
                    <button 
                        @click="addProject"
                        class="inline-flex items-center text-sm text-brand-600 hover:text-brand-700">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        Add Project
                    </button>
                </div>

                <!-- Skills Section -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Skills</label>
                    <div class="flex flex-wrap gap-2 mb-2">
                        <template x-for="(skill, index) in formData.skills" :key="index">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-brand-100 text-brand-700">
                                <span x-text="skill"></span>
                                <button 
                                    @click="removeSkill(index)" 
                                    class="ml-2 text-brand-600 hover:text-brand-700"
                                    aria-label="Remove skill">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </span>
                        </template>
                    </div>
                    <div class="flex gap-2">
                        <input 
                            type="text" 
                            x-model="newSkill"
                            @keydown.enter.prevent="addSkill"
                            class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500"
                            placeholder="Add a skill (press Enter)">
                        <button 
                            @click="addSkill"
                            class="px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2">
                            Add
                        </button>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-4">
                <button 
                    @click="generatePortfolio"
                    class="flex-1 px-6 py-3 bg-brand-600 text-white font-medium rounded-lg hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"
                    :disabled="isGenerating">
                    <span x-show="!isGenerating">Generate Portfolio</span>
                    <span x-show="isGenerating" class="flex items-center justify-center">
                        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        Generating...
                    </span>
                </button>
                <button 
                    x-show="showHostingButton"
                    @click="extendHosting"
                    class="px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2">
                    Extend Hosting (£10/year)
                </button>
            </div>
        </div>

        <!-- Right Column - Preview -->
        <div class="w-full lg:w-1/2">
            <div class="sticky top-24">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">Live Preview</h2>
                    <div 
                        id="preview" 
                        class="w-full aspect-[4/3] bg-gray-50 rounded-lg border border-gray-200 overflow-hidden">
                        <!-- Preview content will be injected here -->
                        <div x-show="!previewReady" class="flex items-center justify-center h-full text-gray-500">
                            Select a template to see preview
                        </div>
                        <iframe 
                            x-show="previewReady"
                            id="preview-frame"
                            class="w-full h-full"
                            srcdoc=""
                            frameborder="0">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add this before the closing </body> tag -->

<script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
<script>
  document.addEventListener('alpine:init', () => {
    Alpine.data('portfolioEditor', () => ({
      // State
      formData: {
        title: '',
        github: '',
        projects: [],
        skills: []
      },
      templates: [
        {
          id: 'modern',
          name: 'Modern Portfolio',
          thumbnail: '/images/templates/modern.jpg',
          colors: {
            primary: '#0ea5e9',
            secondary: '#0369a1'
          }
        },
        {
          id: 'minimal',
          name: 'Minimal Design',
          thumbnail: '/images/templates/minimal.jpg',
          colors: {
            primary: '#18181b',
            secondary: '#3f3f46'
          }
        },
        {
          id: 'creative',
          name: 'Creative Portfolio',
          thumbnail: '/images/templates/creative.jpg',
          colors: {
            primary: '#8b5cf6',
            secondary: '#6d28d9'
          }
        },
        {
          id: 'professional',
          name: 'Professional',
          thumbnail: '/images/templates/professional.jpg',
          colors: {
            primary: '#059669',
            secondary: '#047857'
          }
        }
      ],
      selectedTemplate: null,
      newSkill: '',
      errors: {},
      isGenerating: false,
      previewReady: false,
      showHostingButton: false,
      
      // Lifecycle
      init() {
        // Load saved data from localStorage if available
        const savedData = localStorage.getItem('portfolioData');
        if (savedData) {
          try {
            const parsed = JSON.parse(savedData);
            this.formData = { ...this.formData, ...parsed };
          } catch (e) {
            console.error('Error loading saved data:', e);
          }
        }

        // Watch for changes and save to localStorage
        this.$watch('formData', (value) => {
          localStorage.setItem('portfolioData', JSON.stringify(value));
          this.updatePreview();
        });
      },

      // Methods
      selectTemplate(templateId) {
        this.selectedTemplate = templateId;
        this.errors.template = null;
        this.updatePreview();
      },

      addProject() {
        this.formData.projects.push('');
      },

      removeProject(index) {
        this.formData.projects = this.formData.projects.filter((_, i) => i !== index);
      },

      addSkill() {
        if (this.newSkill.trim()) {
          if (!this.formData.skills.includes(this.newSkill.trim())) {
            this.formData.skills.push(this.newSkill.trim());
          }
          this.newSkill = '';
        }
      },

      removeSkill(index) {
        this.formData.skills = this.formData.skills.filter((_, i) => i !== index);
      },

      validateField(field) {
        this.errors[field] = null;

        switch (field) {
          case 'title':
            if (!this.formData.title.trim()) {
              this.errors.title = 'Portfolio title is required';
            }
            break;
          case 'github':
            if (!this.formData.github.trim()) {
              this.errors.github = 'GitHub username is required';
            } else if (!/^[a-zA-Z0-9-]+$/.test(this.formData.github)) {
              this.errors.github = 'Invalid GitHub username format';
            }
            break;
        }
      },

      validateForm() {
        this.validateField('title');
        this.validateField('github');

        if (!this.selectedTemplate) {
          this.errors.template = 'Please select a template';
        }

        return Object.keys(this.errors).length === 0;
      },

      async generatePortfolio() {
        if (!this.validateForm()) {
          // Scroll to first error
          const firstError = document.querySelector('.text-red-500');
          if (firstError) {
            firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
          return;
        }

        this.isGenerating = true;

        try {
          const response = await fetch('/api/github', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              template: this.selectedTemplate,
              data: this.formData
            })
          });

          if (!response.ok) {
            throw new Error('Failed to generate portfolio');
          }

          const data = await response.json();
          
          // Show success message
          this.showNotification('Success! Your portfolio has been generated.', 'success');
          
          // Show hosting extension button
          this.showHostingButton = true;
          
          // Open portfolio in new tab
          window.open(data.url, '_blank');

        } catch (error) {
          console.error('Generation error:', error);
          this.showNotification('Error generating portfolio. Please try again.', 'error');
        } finally {
          this.isGenerating = false;
        }
      },

      async extendHosting() {
        try {
          const response = await fetch('/api/payment', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              type: 'portfolio-hosting',
              github: this.formData.github
            })
          });

          if (!response.ok) {
            throw new Error('Payment initialization failed');
          }

          const { sessionUrl } = await response.json();
          window.location.href = sessionUrl;

        } catch (error) {
          console.error('Payment error:', error);
          this.showNotification('Error initializing payment. Please try again.', 'error');
        }
      },

      updatePreview() {
        if (!this.selectedTemplate || !this.formData.title) {
          this.previewReady = false;
          return;
        }

        const template = this.templates.find(t => t.id === this.selectedTemplate);
        if (!template) return;

        // Generate preview HTML based on selected template
        const previewHTML = this.generatePreviewHTML(template);
        
        const frame = document.getElementById('preview-frame');
        if (frame) {
          frame.srcdoc = previewHTML;
          this.previewReady = true;
        }
      },

      generatePreviewHTML(template) {
        return `
          <!DOCTYPE html>
          < html >
            < head >
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <script src="https://cdn.tailwindcss.com"></script>
              < style >
                body { font-family: Inter, system-ui, sans-serif; }
                .animate-fade-in { animation: fadeIn 0.5s ease-out; }
                @keyframes fadeIn {
                  from { opacity: 0; }
                  to { opacity: 1; }
                }
              </style>
            </head>
            <body class="bg-gray-50 min-h-screen">
              <div class="max-w-4xl mx-auto px-4 py-8 animate-fade-in">
                <header class="text-center mb-8">
                  <h1 class="text-3xl font-bold mb-2" style="color: ${template.colors.primary}">
                    ${this.formData.title}
                  </h1>
                  ${this.formData.github ? `
                    <a href="https://github.com/${this.formData.github}" 
                       class="inline-flex items-center text-gray-600 hover:text-gray-900"
                       target="_blank"
                       rel="noopener noreferrer">
                      <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 21.795 24 17.295 24 12c0-6.63-5.37-12-12-12"></path>
                      </svg>
                      ${this.formData.github}
                    </a>
                  ` : ''}
                </header>

                ${this.formData.projects.length ? `
                  <section class="mb-8">
                    <h2 class="text-2xl font-semibold mb-4" style="color: ${template.colors.secondary}">
                      Projects
                    </h2>
                    <div class="grid gap-4 md:grid-cols-2">
                      ${this.formData.projects.map(project => `
                        <div class="p-4 bg-white rounded-lg shadow-sm border border-gray-200">
                          <p class="text-gray-700">${project}</p>
                        </div>
                      `).join('')}
                    </div>
                  </section>
                ` : ''}

                ${this.formData.skills.length ? `
                  < section >
                    <h2 class="text-2xl font-semibold mb-4" style="color: ${template.colors.secondary}">
                      Skills
                    </h2>
                    <div class="flex flex-wrap gap-2">
                      ${this.formData.skills.map(skill => `
                        <span class="px-3 py-1 rounded-full text-sm font-medium"
                              style="background-color: ${template.colors.primary}15; color: ${template.colors.primary}">
                          ${skill}
                        </span>
                      `).join('')}
                    </div>
                  </section>
                ` : ''}
              </div>
            </body>
          </html>
        `;
      },

      showNotification(message, type = 'success') {
        const notification = document.createElement('div');
        notification.className = `fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg text-white transform transition-all duration-300 translate-y-full ${
          type === 'success' ? 'bg-green-600' : 'bg-red-600'
        }`;
        notification.textContent = message;
        document.body.appendChild(notification);

        // Animate in
        setTimeout(() => {
          notification.style.transform = 'translateY(0)';
        }, 10);

        // Remove after 5 seconds
        setTimeout(() => {
          notification.style.transform = 'translateY(full)';
          setTimeout(() => {
            document.body.removeChild(notification);
          }, 300);
        }, 5000);
      }
    }));
  });
</script>
<!-- Add this before the closing </body> tag, after the previous script -->

<!-- Notification System -->
<div
    x-data="notificationSystem()"
    class="fixed bottom-4 right-4 z-50 flex flex-col gap-2"
    @notification.window="add($event.detail)">
    <template x-for="notification in notifications" :key="notification.id">
        <div
            x-show="notification.visible"
            x-transition:enter="transform transition ease-out duration-300"
            x-transition:enter-start="translate-x-full opacity-0"
            x-transition:enter-end="translate-x-0 opacity-100"
            x-transition:leave="transform transition ease-in duration-300"
            x-transition:leave-start="translate-x-0 opacity-100"
            x-transition:leave-end="translate-x-full opacity-0"
            :class="{
                'bg-green-600': notification.type === 'success',
                'bg-red-600': notification.type === 'error',
                'bg-blue-600': notification.type === 'info',
                'bg-yellow-600': notification.type === 'warning'
            }"
            class="px-6 py-3 rounded-lg shadow-lg text-white flex items-center gap-3 min-w-[300px]">
            <!-- Icon -->
            <span class="flex-shrink-0">
                <template x-if="notification.type === 'success'">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                </template>
                <template x-if="notification.type === 'error'">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </template>
            </span>
            <!-- Message -->
            <p class="flex-grow" x-text="notification.message"></p>
            <!-- Close Button -->
            <button @click="remove(notification.id)" class="flex-shrink-0 hover:text-white/80">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    </template>
</div>

<!-- Loading Overlay -->
<div
    x-data="{ loading: false }"
    @loading.window="loading = $event.detail"
    x-show="loading"
    x-transition.opacity
    class="fixed inset-0 bg-black/50 flex items-center justify-center z-50"
    style="display: none;">
    <div class="bg-white rounded-lg p-8 max-w-sm w-full mx-4 text-center">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-brand-600 mx-auto mb-4"></div>
        <p class="text-gray-700" x-text="loading.message || 'Loading...'"</p>
    </div>
</div>

<!-- Keyboard Shortcuts Modal -->
<div
    x-data="{ open: false }"
    @keydown.meta.k.window.prevent="open = true"
    @keydown.escape.window="open = false">
    <div
        x-show="open"
        x-transition.opacity
        class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center"
        style="display: none;">
        <div
            @click.away="open = false"
            class="bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">Keyboard Shortcuts</h3>
                <button @click="open = false" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="space-y-4">
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Generate Portfolio</span>
                    <kbd class="px-2 py-1 bg-gray-100 rounded text-sm">⌘ + Enter</kbd>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Show Shortcuts</span>
                    <kbd class="px-2 py-1 bg-gray-100 rounded text-sm">⌘ + K</kbd>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">Save Draft</span>
                    <kbd class="px-2 py-1 bg-gray-100 rounded text-sm">⌘ + S</kbd>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Notification System
    function notificationSystem() {
        return {
            notifications: [],
            add(notification) {
                const id = Date.now();
                this.notifications.push({
                    id,
                    message: notification.message,
                    type: notification.type || 'info',
                    visible: true
                });
                
                setTimeout(() => this.remove(id), notification.duration || 5000);
            },
            remove(id) {
                const notification = this.notifications.find(n => n.id === id);
                if (notification) {
                    notification.visible = false;
                    setTimeout(() => {
                        this.notifications = this.notifications.filter(n => n.id !== id);
                    }, 300);
                }
            }
        };
    }

    // Keyboard Shortcuts
    document.addEventListener('keydown', (e) => {
        // Generate Portfolio (Cmd/Ctrl + Enter)
        if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {
            e.preventDefault();
            document.querySelector('#generate')?.click();
        }

        // Save Draft (Cmd/Ctrl + S)
        if ((e.metaKey || e.ctrlKey) && e.key === 's') {
            e.preventDefault();
            const portfolioData = {
                title: document.querySelector('#portfolioTitle')?.value,
                github: document.querySelector('#githubUsername')?.value,
                // Add other fields as needed
            };
            localStorage.setItem('portfolioData', JSON.stringify(portfolioData));
            window.dispatchEvent(new CustomEvent('notification', {
                detail: {
                    message: 'Draft saved successfully',
                    type: 'success',
                    duration: 3000
                }
            }));
        }
    });

    // Auto-save functionality
    let autoSaveTimeout;
    document.querySelectorAll('input, textarea').forEach(element => {
        element.addEventListener('input', () => {
            clearTimeout(autoSaveTimeout);
            autoSaveTimeout = setTimeout(() => {
                const portfolioData = {
                    title: document.querySelector('#portfolioTitle')?.value,
                    github: document.querySelector('#githubUsername')?.value,
                    // Add other fields as needed
                };
                localStorage.setItem('portfolioData', JSON.stringify(portfolioData));
                window.dispatchEvent(new CustomEvent('notification', {
                    detail: {
                        message: 'Draft auto-saved',
                        type: 'info',
                        duration: 2000
                    }
                }));
            }, 1000);
        });
    });

    // Form validation enhancement
    function validateGitHubUsername(username) {
        return /^[a-zA-Z0-9](?:[a-zA-Z0-9]|-(?=[a-zA-Z0-9])){0,38}$/.test(username);
    }

    // Debounced GitHub username validation
    let validationTimeout;
    document.querySelector('#githubUsername')?.addEventListener('input', (e) => {
        clearTimeout(validationTimeout);
        validationTimeout = setTimeout(async () => {
            const username = e.target.value;
            if (username && validateGitHubUsername(username)) {
                try {
                    const response = await fetch(`https://api.github.com/users/${username}`);
                    if (!response.ok) {
                        throw new Error('GitHub username not found');
                    }
                    // Username exists
                    e.target.classList.remove('border-red-500');
                    e.target.classList.add('border-green-500');
                } catch (error) {
                    e.target.classList.remove('border-green-500');
                    e.target.classList.add('border-red-500');
                }
            }
        }, 500);
    });
</script>
